import{j as e,M as u,R as p,b as g,a as f,f as j,g as v,S as A}from"./index-DAg5jg80.js";import{C as b}from"./Card-DM-niqc6.js";import{R as d,L as N,f as y,c as w}from"./react-vendor-CcgNOuPr.js";import{am as M,au as C,av as L,aw as D}from"./ui-libs-DESkVoKS.js";import{D as _}from"./util-libs-BDx6lZXm.js";const S=d.memo(({doctor:a})=>e.jsxs("div",{className:"flex flex-col h-1/2",children:[e.jsx("h2",{className:"card-h2 grow",children:a.name}),e.jsx("section",{className:"",children:e.jsx("div",{className:"italic font-semibold text-sm flex flex-wrap justify-end gap-4 overflow-hidden relative"})})]}),(a,s)=>a.doctor.id===s.doctor.id),k="/assets/doctor-DWj-JuwH.jpg",P=d.memo(({doctor:a})=>e.jsxs("section",{className:"flex gap-2",children:[e.jsx("div",{className:"doctor-img-container max-w-20",children:e.jsx("img",{className:"doctor-img",src:k,alt:"doc_img"})}),e.jsxs("div",{className:"flex flex-col justify-between max-w-40",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx(N,{to:`/doctors/${a.id}`,children:e.jsxs("h2",{className:"card-h2 truncate line-clamp-1 hover:underline hover:text-blue-700",children:["Dr. ",a.name]})}),e.jsx(u,{color:a.verified?"green":"red"})]}),e.jsxs("div",{className:"flex gap-2 text-sm",children:[e.jsx("h2",{className:"card-h2 line-clamp-1",children:a.primary_specialization}),e.jsxs("p",{children:["(",a.experience,"y)"]})]})]}),e.jsxs("div",{className:"flex gap-2 items-center font-semibold text-sm",children:[e.jsx(p,{rating:a?.rating||0}),e.jsxs("h3",{className:"underline",children:["(",a.reviews,")"]})]})]})]})),x={name:"call",label:"consult now"},h={name:"schedule",label:"schedule"},Z={name:"message",label:"Get in touch"},R={name:"profile",label:"View profile"},$={available:[{...x,isPrimary:!0},{...h,showsModal:!0}],in_patient:[{...h,showsModal:!0,isPrimary:!0},{...x,showsModal:!0}],away:[{...Z,isPrimary:!0},{...R}]};class z{_dr;availableActions;cache={};constructor(s){this._dr=s,this.availableActions=(function(i){return $[i.status??"away"]})(this._dr)}openActionModal(s,l){g.getState().openModal(s,l||{})}schedule(){const s={},l=this._dr;if(l.next_available){const i=_.fromISO(l.next_available);let n=i.diffNow("days").days;s.nextAvailable=i,n=Math.ceil(n);const r=n===1,t=this._dr.schedules.find(o=>o.weekday<=i.weekday-1)?.slots.reduce((o,m)=>m.booked?o:[...o,m],[])||[];s.slotsLeft=t,s.nearestSlot=t[0],s.tagline=r?`Available Tomorrow, only ${t.length} slots left !`:`Next available in ${n} days. Book the next available slot`,s.isAvailableTomorrow=r}this.openActionModal("schedule",{doctor:l,position:"center",context:s})}call(){}message(){}profile(){}hasAction(s){return this.availableActions.find(l=>l.name===s)&&typeof this[s]=="function"}executeAction(s){this.hasAction(s)&&this[s].call(this)}}function B(a){return M({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M185,127,127,185a24,24,0,0,1-33.94,0L71,162.91A24,24,0,0,1,71,129L129,71a24,24,0,0,1,33.94,0L185,93.09A24,24,0,0,1,185,127Z",opacity:"0.2"},child:[]},{tag:"path",attr:{d:"M237.66,18.34a8,8,0,0,0-11.32,0l-52.4,52.41-5.37-5.38a32.05,32.05,0,0,0-45.26,0L100,88.69l-6.34-6.35A8,8,0,0,0,82.34,93.66L88.69,100,65.37,123.31a32,32,0,0,0,0,45.26l5.38,5.37-52.41,52.4a8,8,0,0,0,11.32,11.32l52.4-52.41,5.37,5.38a32.06,32.06,0,0,0,45.26,0L156,167.31l6.34,6.35a8,8,0,0,0,11.32-11.32L167.31,156l23.32-23.31a32,32,0,0,0,0-45.26l-5.38-5.37,52.41-52.4A8,8,0,0,0,237.66,18.34Zm-116.29,161a16,16,0,0,1-22.62,0L76.69,157.25a16,16,0,0,1,0-22.62L100,111.31,144.69,156Zm57.94-57.94h0L156,144.69,111.31,100l23.32-23.31a16,16,0,0,1,22.62,0l22.06,22a16,16,0,0,1,0,22.63ZM88.57,35A8,8,0,0,1,103.43,29l8,20A8,8,0,0,1,96.57,55ZM24.57,93A8,8,0,0,1,35,88.57l20,8A8,8,0,0,1,49,111.43l-20-8A8,8,0,0,1,24.57,93ZM231.43,163a8,8,0,0,1-10.4,4.46l-20-8A8,8,0,1,1,207,144.57l20,8A8,8,0,0,1,231.43,163Zm-64,58.06A8,8,0,0,1,152.57,227l-8-20A8,8,0,0,1,159.43,201Z"},child:[]}]})(a)}const I={profile:D,message:B,call:L,schedule:C},T=d.memo(({doctor:a})=>{const s=new z(a),l=y();return e.jsx("section",{className:"flex flex-col text-sm capitalize",children:e.jsxs("section",{className:"flex flex-col mt-auto gap-2 relative",children:[e.jsx("div",{className:"flex flex-col items-end gap-1"}),e.jsx("div",{className:"flex items-center italic gap-1 self-end",children:(s.availableActions||[]).map((i,n)=>{const{isPrimary:r,label:c="",name:t}=i,o=I[t];return e.jsxs(f,{name:t,...r?{variant:"contained",color:"primary"}:{variant:"outlined"},style:{order:r?1:-1},onClick:()=>l(`/doctors/${a.id}/schedule`),children:[j(c)," ",o&&e.jsx(o,{size:12})]},`${i.label}-${n}`)})})]})})});function E({drEssentials:a}){return e.jsxs("article",{className:"flex flex-col gap-4",children:[e.jsx(P,{doctor:a}),e.jsx(T,{doctor:a})]})}function H(){const{isLoading:a,isError:s,error:l,data:{entities:i=[],applied_filters:n,total_count:r}={}}=v(),[,c]=w();return a?e.jsx(A,{}):n&&!r?e.jsxs("div",{className:"flex flex-col justify-center items-center gap-2 mt-4",children:[e.jsx("h2",{className:"text-lg uppercase font-bold font-mono",children:"No matching doctors found!"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(f,{onClick:()=>c({}),size:"md",children:"Reset filters"})})]}):(i||[]).map(t=>e.jsx(b,{entity:t,CardFront:e.jsx(E,{drEssentials:t}),CardBack:e.jsx(S,{doctor:t})},t.id))}export{H as default};
