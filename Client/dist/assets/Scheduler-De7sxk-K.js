import{u as p,j as e,B as v,W as M,m as y,I as z,a as g,A as k,s as O,b as P,c as $,S as R}from"./index-DAg5jg80.js";import{r as d,L as N,u as T}from"./react-vendor-CcgNOuPr.js";import{D as f}from"./util-libs-BDx6lZXm.js";import{am as S,as as H,at as V}from"./ui-libs-DESkVoKS.js";function q(t){return t.startOf("day").equals(f.now().startOf("day"))}const A=d.memo(({...t})=>{const{date:a,disabled:i=!1}=t,l=p(r=>r.selectedDate),o=p(r=>r.setSelectedDate);function c(){return i?"No schedules available on this date":"Available"}return e.jsx(v,{rotate:!0,as:"button",color:"slate",disabled:i,current:q(a),content:a.day.toString(),"data-tooltip":c(),onClick:()=>o(a),selected:l?.startOf("day")?.equals(a.startOf("day"))})});A.displayName="CalendarDay";function F(t){const a=f.local().set({year:t.year,month:t.month-1}).daysInMonth,i=t.set({day:1}).weekday,l=a-i+1,o=[];for(let c=l;c<=a;c++)o.push(f.local().set({month:t.month-1,day:c}));return o}function G(t,a){const i=Math.abs(t%7-7);return Array.from({length:i},(l,o)=>f.local().set({month:a+1,day:o+1}))}function W(t){const a=F(t),i=t.daysInMonth,l=[...a,...Array.from({length:i??0},(c,r)=>r+1).map(c=>t.set({day:c}))],o=G(l.length,t.month);return[l,o].flat()}const _=f.local(),B=d.memo(({schedules:t,monthInView:a})=>{const i=d.useMemo(function(){return W(a)},[a]),l=d.useMemo(function(){return t?.map(s=>s.weekday)||[]},[t]);function o(s){return s.month<a.month||s.month===a.month&&s.day<a.day}const r=`grid gap-6 justify-items-center grid-cols-7 grid-rows-${i.length<42?5:6} min-h-96`;return e.jsxs("div",{className:r,children:[M.map((s,x)=>e.jsx("h2",{className:`opacity-80 font-black underline-offset-4 capitalize  ${s.toLowerCase()===a.weekdayLong?.toLowerCase()&&a.month===_.month?"text-accent-dark underline font-black":""}`,children:s.slice(0,3)},x)),i.map(s=>e.jsx(A,{date:s,disabled:o(s)||!l.includes(s.weekday)},`${s.day}-${s.month}-${s.year}`))]})});B.displayName="CalendarBody";function K(t){return S({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"},child:[]}]})(t)}function L(t){return S({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8"},child:[]}]})(t)}const Y=f.local(),J={hidden:{x:100,opacity:0},visible:{x:0,opacity:1}},Q=d.memo(({schedules:t})=>{const[a,i]=d.useState(!1),[l,o]=d.useState(f.local()),c=d.useCallback(r=>{const s=r==="right"?l.month+1:l.month-1;s<1||s>12||o(x=>x.set({month:s}))},[l]);return e.jsxs("section",{className:"box relative",children:[e.jsxs("header",{children:[e.jsxs("div",{className:`absolute right-2 top-1 flex items-center justify-end overflow-hidden \r
        italic font-bold text-sm gap-2 text-sky-900 opacity-75 selection:bg-transparent`,children:[e.jsx(y.p,{initial:!1,variants:J,transition:{duration:.1},animate:a?"visible":"hidden",children:"Select any day that fits your schedule"}),e.jsx(z,{className:"cursor-pointer z-1",onClick:()=>i(r=>!r)})]}),e.jsxs("article",{className:"flex items-center justify-between",children:[e.jsx(y.h2,{className:"card-h2 text-lg uppercase font-black",children:l.monthLong}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(g,{variant:"icon",onClick:c.bind(null,"right"),children:e.jsx(L,{})}),e.jsx(g,{variant:"icon",disabled:l.month<=Y.month,onClick:c.bind(null,"left"),children:e.jsx(K,{})})]})]})]}),e.jsx(B,{schedules:t,monthInView:l})]})});function U(t){return S({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m12 17 1-2V9.858c1.721-.447 3-2 3-3.858 0-2.206-1.794-4-4-4S8 3.794 8 6c0 1.858 1.279 3.411 3 3.858V15l1 2z"},child:[]},{tag:"path",attr:{d:"m16.267 10.563-.533 1.928C18.325 13.207 20 14.584 20 16c0 1.892-3.285 4-8 4s-8-2.108-8-4c0-1.416 1.675-2.793 4.267-3.51l-.533-1.928C4.197 11.54 2 13.623 2 16c0 3.364 4.393 6 10 6s10-2.636 10-6c0-2.377-2.197-4.46-5.733-5.437z"},child:[]}]})(t)}const X={initial:{opacity:0,y:-40},animate:{opacity:1,y:0,transition:{staggerChildren:.1,delayChildren:.25}},exit:{y:-40,opacity:0}},D={initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0}},Z=d.memo(function({doctor:t,onShow:a,schedules:i,showClinicsView:l}){const o=p(n=>n.selectedDate),c=p(n=>n.setSelectedDate),[r,s]=d.useState(new Set),x=p(n=>n.selectedSlot),j=p(n=>n.setSelectedSlot),C=d.useCallback(n=>r.has(n),[r]);d.useEffect(()=>{if(o){const n=i.filter(h=>h.weekday===o.weekday).map(h=>h.id);s(new Set(n)),a(!0)}},[o,i,a]);const E=d.useCallback(n=>{s(h=>{const m=new Set(h);return m.has(n)?m.delete(n):(m.add(n),r.has(n)||c(null)),m})},[]);async function I(n,h,m){O({selectedSlot:n,selectedClinic:h,selectedSchedule:m}),P.getState().openModal("schedule",{dr:t})}return e.jsx(k,{children:l&&e.jsx(y.section,{variants:X,transition:{duration:.25,ease:"easeOut"},initial:"initial",animate:"animate",exit:"exit",className:"box py-4 flex flex-col w-full gap-12",children:i.map(n=>{const{id:h,weekday:m,slots:b=[],clinic:w={}}=n||{};return e.jsxs(y.article,{variants:D,className:"schedule-view-box flex flex-col gap-6 ",children:[e.jsxs("header",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx(N,{className:"flex items-center gap-2 card-h2",to:"/",children:w?.name}),e.jsxs(N,{to:"/",className:"flex items-center gap-1 text-sm underline underline-offset-2",children:[w?.address,e.jsx(U,{size:8})]})]}),e.jsx(g,{variant:"icon",initial:!1,needsMotion:!0,onClick:()=>E(h),animate:{rotate:C(h)?90:0},children:e.jsx(L,{})})]}),e.jsx(k,{children:C(n.id)&&e.jsxs(y.div,{variants:D,initial:"initial",animate:"animate",exit:"exit",className:"flex flex-col gap-6",transition:{duration:.2,ease:"easeOut",opacity:{duration:.1}},children:[e.jsx(v,{as:"button",full:!1,className:"self-center",content:M[m],selected:m===o?.weekday}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"flex items-center justify-center flex-wrap gap-4",children:b.every(u=>u.booked)?e.jsx("p",{className:"label text-lg text-error-dark",children:"All slots booked !"}):b?.map(u=>e.jsx(v,{as:"button",full:!1,content:u.begin,disabled:u.booked,onClick:()=>j(u),selected:u.id===x?.id},u.id))}),b.some(u=>u.id===x?.id)&&e.jsxs(g,{onClick:()=>I(x,w,n),className:"self-end flex items-center gap-2 text-sm capitalize",children:["book slot",e.jsx(H,{})]})]})]},h)})]},h)})},`${t.id}-schedule-view`)})}),ne=d.memo(()=>{const t=T().pathname.split("/").at(2),{data:a,isPending:i,isError:l}=$(t),[o,c]=d.useState(!1);if(i)return e.jsx(R,{});if(l)return e.jsx("div",{className:"card-h2",children:"Hold your breathe. Doctor onboarding in process ..."});const{name:r,schedules:s=[]}=a;function x(){c(j=>!j)}return e.jsxs("section",{className:"font-semibold flex flex-col pb-12 gap-8 mt-4",children:[e.jsxs("header",{className:"flex items-center gap-4",children:[e.jsxs("h2",{className:"card-h2 text-2xl font-black",children:["Dr. ",r," Tanner"]}),e.jsx(g,{variant:"icon",needsMotion:!0,onClick:x,animate:{rotate:o?90:0},children:e.jsx(V,{})})]}),e.jsx("section",{className:"flex flex-col gap-2",children:e.jsx(Z,{doctor:a,schedules:s,onShow:c,showClinicsView:o})}),e.jsx("section",{className:"flex flex-col gap-8 md:flex-row w-full",children:e.jsx(Q,{schedules:s})})]})});export{ne as default};
